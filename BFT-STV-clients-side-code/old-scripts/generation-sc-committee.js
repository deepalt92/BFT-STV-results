const fs = require('fs')
const Wallet = require('ethereumjs-wallet')
const EthereumTx = require('ethereumjs-tx').Transaction
const Common = require('ethereumjs-common')

// Sample params, can change to do with arguments

const NUMTX = 1
//const destinationAcccount = "0xBce16ea55bB357B038e612b1722A88879c665a31"
const startBalance = "0xfffc3b15f9926687d2c40534fdb564000000000000"
//var CONTRACTABI = eth.contract([{"constant":false,"inputs":[],"name":"Hello","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"message","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"view","type":"function"}]);
var CONTRACTDATA = "0x608060405234801561001057600080fd5b5033600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506000601181905550613e97806100696000396000f3fe608060405234801561001057600080fd5b506004361061004c5760003560e01c80632e4176cf146100515780632f7d73e21461006f5780637816a3a11461008b5780639fe9d578146100bb575b600080fd5b6100596100d7565b60405161006691906131b0565b60405180910390f35b610089600480360381019061008491906132c6565b6100fd565b005b6100a560048036038101906100a0919061335b565b61043f565b6040516100b29190613418565b60405180910390f35b6100d560048036038101906100d0919061343a565b6104eb565b005b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60008061010a91906130cd565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff161461019a576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101919061350a565b60405180910390fd5b60005b858590508110156103c95760008686838181106101bd576101bc61352a565b5b90506020028101906101cf9190613568565b90918060018154018082558091505060019003906000526020600020016000909192909192909192909192509182610208929190613811565b5085858281811061021c5761021b61352a565b5b905060200281019061022e9190613568565b600460008686868181106102455761024461352a565b5b905060200201602081019061025a919061390d565b73ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002091826102a1929190613811565b506000601d8787848181106102b9576102b861352a565b5b90506020028101906102cb9190613568565b6040516102d9929190613979565b908152602001604051809103902060006101000a81548160ff021916908315150217905550600160028787848181106103155761031461352a565b5b90506020028101906103279190613568565b604051610335929190613979565b908152602001604051809103902060006101000a81548160ff021916908315150217905550600060038787848181106103715761037061352a565b5b90506020028101906103839190613568565b604051610391929190613979565b908152602001604051809103902060006101000a81548160ff02191690831515021790555080806103c1906139c1565b91505061019d565b5060008054905060138190555082600d81905550600360016013546103ee9190613a09565b6103f89190613a6c565b6013546104059190613a09565b601281905550600180600d5461041b9190613a9d565b6012546104289190613a6c565b6104329190613a9d565b6018819055505050505050565b6009818154811061044f57600080fd5b90600052602060002001600091509050805461046a90613634565b80601f016020809104026020016040519081016040528092919081815260200182805461049690613634565b80156104e35780601f106104b8576101008083540402835291602001916104e3565b820191906000526020600020905b8154815290600101906020018083116104c657829003601f168201915b505050505081565b60005b82829050811015610612576005600060115481526020019081526020016000208383838181106105215761052061352a565b5b90506020028101906105339190613568565b9091806001815401808255809150506001900390600052602060002001600090919290919290919290919250918261056c929190613811565b50600060068484848181106105845761058361352a565b5b90506020028101906105969190613568565b6040516105a4929190613979565b9081526020016040518091039020819055506000600e8484848181106105cd576105cc61352a565b5b90506020028101906105df9190613568565b6040516105ed929190613979565b908152602001604051809103902081905550808061060a906139c1565b9150506104ee565b50600060056000601154815260200190815260200160002080549050146106495760016011546106429190613a9d565b6011819055505b60125460115403610dda5760005b60115481101561068d57600060086000838152602001908152602001600020819055508080610685906139c1565b915050610657565b506000601b819055506000601a8190555060005b60115481101561076b576001600660056000848152602001908152602001600020601b54815481106106d6576106d561352a565b5b906000526020600020016040516106ed9190613b54565b9081526020016040518091039020546107069190613a9d565b600660056000848152602001908152602001600020601b548154811061072f5761072e61352a565b5b906000526020600020016040516107469190613b54565b9081526020016040518091039020819055508080610763906139c1565b9150506106a1565b505b600d546009805490501080156107865750601354601b54105b156109fc576000601c60036101000a81548160ff0219169083151502179055506000601c60016101000a81548160ff0219169083151502179055506000601c60026101000a81548160ff0219169083151502179055506107e4610dde565b601c60006101000a81548160ff02191690831515021790555060011515601c60009054906101000a900460ff16151503610834576001601c60036101000a81548160ff0219169083151502179055505b60001515601c60039054906101000a900460ff161515036109c957620186a060198190555060005b6011548110156109bf5760006008600060115481526020019081526020016000205490505b6013548110156109ab5760195460066005600085815260200190815260200160002083815481106108b5576108b461352a565b5b906000526020600020016040516108cc9190613b54565b90815260200160405180910390205410801561093f5750601d60056000848152602001908152602001600020828154811061090a5761090961352a565b5b906000526020600020016040516109219190613b54565b908152602001604051809103902060009054906101000a900460ff16155b1561099857600660056000848152602001908152602001600020828154811061096b5761096a61352a565b5b906000526020600020016040516109829190613b54565b9081526020016040518091039020546019819055505b80806109a3906139c1565b915050610881565b5080806109b7906139c1565b91505061085c565b506109c8612122565b5b600d54601a546013546109dc9190613a09565b03156109fc576001601b546109f19190613a9d565b601b8190555061076d565b610a04612f79565b6019819055505b600d54601a54601354610a1e9190613a09565b1115610bb05760005b601154811015610baa5760005b601354811015610b96576019546006600560008581526020019081526020016000208381548110610a6857610a6761352a565b5b90600052602060002001604051610a7f9190613b54565b908152602001604051809103902054148015610aab5750600d54601a54601354610aa99190613a09565b115b8015610b065750629896806006600560008581526020019081526020016000208381548110610add57610adc61352a565b5b90600052602060002001604051610af49190613b54565b90815260200160405180910390205414155b15610b8357629896806006600560008581526020019081526020016000208381548110610b3657610b3561352a565b5b90600052602060002001604051610b4d9190613b54565b9081526020016040518091039020819055506001601a54610b6e9190613a9d565b601a81905550610b7c612f79565b6019819055505b8080610b8e906139c1565b915050610a34565b508080610ba2906139c1565b915050610a27565b50610a0b565b600d54601a54601354610bc39190613a09565b03610da15760005b601154811015610d9f5760005b601354811015610d8b57629896806006600560008581526020019081526020016000208381548110610c0d57610c0c61352a565b5b90600052602060002001604051610c249190613b54565b90815260200160405180910390205414158015610c985750601d600560008481526020019081526020016000208281548110610c6357610c6261352a565b5b90600052602060002001604051610c7a9190613b54565b908152602001604051809103902060009054906101000a900460ff16155b8015610caa5750600d54600980549050105b15610d78576009600560008481526020019081526020016000208281548110610cd657610cd561352a565b5b90600052602060002001908060018154018082558091505060019003906000526020600020016000909190919091509081610d119190613b96565b506001601d600560008581526020019081526020016000208381548110610d3b57610d3a61352a565b5b90600052602060002001604051610d529190613b54565b908152602001604051809103902060006101000a81548160ff0219169083151502179055505b8080610d83906139c1565b915050610bd8565b508080610d97906139c1565b915050610bcb565b505b7f2926d6ae08a4bf728bae76cc3399da96b2a9e3f6309d697ee4587a730b40de086009604051610dd19190613dd9565b60405180910390a15b5050565b600080600090505b600080549050811015610e88576000600e60008381548110610e0b57610e0a61352a565b5b90600052602060002001604051610e229190613b54565b9081526020016040518091039020819055506000600f60008381548110610e4c57610e4b61352a565b5b90600052602060002001604051610e639190613b54565b9081526020016040518091039020819055508080610e80906139c1565b915050610de6565b5060005b600c80549050811015610ee357600060076000600c8481548110610eb357610eb261352a565b5b90600052602060002001548152602001908152602001600020819055508080610edb906139c1565b915050610e8c565b50600a6000610ef291906130cd565b6000601c60036101000a81548160ff0219169083151502179055506000601c60016101000a81548160ff021916908315150217905550600d54600980549050101561210d5760005b60115481101561132b576000600860008381526020019081526020016000205490505b601354811015611317576018546006600560008581526020019081526020016000208381548110610f9157610f9061352a565b5b90600052602060002001604051610fa89190613b54565b908152602001604051809103902054101580156110145750629896806006600560008581526020019081526020016000208381548110610feb57610fea61352a565b5b906000526020600020016040516110029190613b54565b90815260200160405180910390205414155b801561107d575060001515601d6005600085815260200190815260200160002083815481106110465761104561352a565b5b9060005260206000200160405161105d9190613b54565b908152602001604051809103902060009054906101000a900460ff161515145b15611304576001601d6005600085815260200190815260200160002083815481106110ab576110aa61352a565b5b906000526020600020016040516110c29190613b54565b908152602001604051809103902060006101000a81548160ff021916908315150217905550600960056000848152602001908152602001600020828154811061110e5761110d61352a565b5b906000526020600020019080600181540180825580915050600190039060005260206000200160009091909190915090816111499190613b96565b506001601c60036101000a81548160ff021916908315150217905550601854600660056000858152602001908152602001600020838154811061118f5761118e61352a565b5b906000526020600020016040516111a69190613b54565b9081526020016040518091039020546111bf9190613a09565b60158190555060185460066005600085815260200190815260200160002083815481106111ef576111ee61352a565b5b906000526020600020016040516112069190613b54565b908152602001604051809103902081905550601554600e6005600085815260200190815260200160002083815481106112425761124161352a565b5b906000526020600020016040516112599190613b54565b908152602001604051809103902081905550600a6005600084815260200190815260200160002082815481106112925761129161352a565b5b906000526020600020019080600181540180825580915050600190039060005260206000200160009091909190915090816112cd9190613b96565b5080600860006011548152602001908152602001600020819055506001601c60016101000a81548160ff0219169083151502179055505b808061130f906139c1565b915050610f5d565b508080611323906139c1565b915050610f3a565b50601c60019054906101000a900460ff161561210c5760005b60115481101561137b57611b5860106000838152602001908152602001600020819055508080611373906139c1565b915050611344565b5060005b601154811015611a2f5760006016819055505b600a805490506016541015611a1c57600a601654815481106113b7576113b661352a565b5b906000526020600020016040516020016113d19190613b54565b604051602081830303815290604052805190602001206005600083815260200190815260200160002060086000848152602001908152602001600020548154811061141f5761141e61352a565b5b906000526020600020016040516020016114399190613b54565b60405160208183030381529060405280519060200120036119ff576001600f600560008481526020019081526020016000206008600085815260200190815260200160002054815481106114905761148f61352a565b5b906000526020600020016040516114a79190613b54565b9081526020016040518091039020546114c09190613a9d565b600f600560008481526020019081526020016000206008600085815260200190815260200160002054815481106114fa576114f961352a565b5b906000526020600020016040516115119190613b54565b90815260200160405180910390208190555060006001905060016013546115389190613a09565b8160086000858152602001908152602001600020546115579190613a9d565b10156119fd575b601d600560008481526020019081526020016000208260086000868152602001908152602001600020546115929190613a9d565b815481106115a3576115a261352a565b5b906000526020600020016040516115ba9190613b54565b908152602001604051809103902060009054906101000a900460ff168061164d5750629896806006600560008581526020019081526020016000208360086000878152602001908152602001600020546116149190613a9d565b815481106116255761162461352a565b5b9060005260206000200160405161163c9190613b54565b908152602001604051809103902054145b8015611684575060026013546116639190613a09565b8160086000858152602001908152602001600020546116829190613a9d565b105b1561169d576001816116969190613a9d565b905061155e565b601d600560008481526020019081526020016000208260086000868152602001908152602001600020546116d19190613a9d565b815481106116e2576116e161352a565b5b906000526020600020016040516116f99190613b54565b908152602001604051809103902060009054906101000a900460ff16158015611741575060135481600860008581526020019081526020016000205461173f9190613a9d565b105b156119fc57600160076000600560008681526020019081526020016000206008600087815260200190815260200160002054815481106117845761178361352a565b5b90600052602060002001600560008781526020019081526020016000208560086000898152602001908152602001600020546117c09190613a9d565b815481106117d1576117d061352a565b5b906000526020600020016040516020016117ec929190613dfb565b6040516020818303038152906040528051906020012081526020019081526020016000205461181b9190613a9d565b60076000600560008681526020019081526020016000206008600087815260200190815260200160002054815481106118575761185661352a565b5b90600052602060002001600560008781526020019081526020016000208560086000898152602001908152602001600020546118939190613a9d565b815481106118a4576118a361352a565b5b906000526020600020016040516020016118bf929190613dfb565b60405160208183030381529060405280519060200120815260200190815260200160002081905550600c600560008481526020019081526020016000206008600085815260200190815260200160002054815481106119215761192061352a565b5b906000526020600020016005600085815260200190815260200160002083600860008781526020019081526020016000205461195d9190613a9d565b8154811061196e5761196d61352a565b5b90600052602060002001604051602001611989929190613dfb565b6040516020818303038152906040528051906020012090806001815401808255809150506001900390600052602060002001600090919091909150558060086000848152602001908152602001600020546119e49190613a9d565b60106000848152602001908152602001600020819055505b5b505b60166000815480929190611a12906139c1565b9190505550611392565b8080611a27906139c1565b91505061137f565b5060005b6011548110156120a1576000600190505b6001601354611a539190613a09565b81101561208d57601354816008600085815260200190815260200160002054611a7c9190613a9d565b108015611b52575060006007600060056000868152602001908152602001600020600860008781526020019081526020016000205481548110611ac257611ac161352a565b5b9060005260206000200160056000878152602001908152602001600020856008600089815260200190815260200160002054611afe9190613a9d565b81548110611b0f57611b0e61352a565b5b90600052602060002001604051602001611b2a929190613dfb565b6040516020818303038152906040528051906020012081526020019081526020016000205414155b8015611bd35750601d60056000848152602001908152602001600020826008600086815260200190815260200160002054611b8d9190613a9d565b81548110611b9e57611b9d61352a565b5b90600052602060002001604051611bb59190613b54565b908152602001604051809103902060009054906101000a900460ff16155b8015611c3f57506000600f60056000858152602001908152602001600020600860008681526020019081526020016000205481548110611c1657611c1561352a565b5b90600052602060002001604051611c2d9190613b54565b90815260200160405180910390205414155b8015611cad575062989680600660056000858152602001908152602001600020600860008681526020019081526020016000205481548110611c8457611c8361352a565b5b90600052602060002001604051611c9b9190613b54565b90815260200160405180910390205414155b8015611d26575062989680600660056000858152602001908152602001600020836008600087815260200190815260200160002054611cec9190613a9d565b81548110611cfd57611cfc61352a565b5b90600052602060002001604051611d149190613b54565b90815260200160405180910390205414155b1561207a57600f60056000848152602001908152602001600020600860008581526020019081526020016000205481548110611d6557611d6461352a565b5b90600052602060002001604051611d7c9190613b54565b9081526020016040518091039020546007600060056000868152602001908152602001600020600860008781526020019081526020016000205481548110611dc757611dc661352a565b5b9060005260206000200160056000878152602001908152602001600020856008600089815260200190815260200160002054611e039190613a9d565b81548110611e1457611e1361352a565b5b90600052602060002001604051602001611e2f929190613dfb565b60405160208183030381529060405280519060200120815260200190815260200160002054600e60056000868152602001908152602001600020600860008781526020019081526020016000205481548110611e8e57611e8d61352a565b5b90600052602060002001604051611ea59190613b54565b908152602001604051809103902054611ebe9190613e1f565b611ec89190613a6c565b600660056000858152602001908152602001600020836008600087815260200190815260200160002054611efc9190613a9d565b81548110611f0d57611f0c61352a565b5b90600052602060002001604051611f249190613b54565b908152602001604051809103902054611f3d9190613a9d565b600660056000858152602001908152602001600020836008600087815260200190815260200160002054611f719190613a9d565b81548110611f8257611f8161352a565b5b90600052602060002001604051611f999190613b54565b90815260200160405180910390208190555060006007600060056000868152602001908152602001600020600860008781526020019081526020016000205481548110611fe957611fe861352a565b5b90600052602060002001600560008781526020019081526020016000208560086000898152602001908152602001600020546120259190613a9d565b815481106120365761203561352a565b5b90600052602060002001604051602001612051929190613dfb565b604051602081830303815290604052805190602001208152602001908152602001600020819055505b8080612085906139c1565b915050611a44565b508080612099906139c1565b915050611a33565b5060005b60115481101561210a57611b586010600083815260200190815260200160002054146120f757601060008281526020019081526020016000205460086000838152602001908152602001600020819055505b8080612102906139c1565b9150506120a5565b505b5b601c60039054906101000a900460ff16905090565b600080600090505b600c8054905081101561218157600060076000600c84815481106121515761215061352a565b5b90600052602060002001548152602001908152602001600020819055508080612179906139c1565b91505061212a565b5060005b6011548110156129cc576000600860008381526020019081526020016000205490505b6013548110156129b85760195460066005600085815260200190815260200160002083815481106121dc576121db61352a565b5b906000526020600020016040516121f39190613b54565b9081526020016040518091039020541480156122665750601d6005600084815260200190815260200160002082815481106122315761223061352a565b5b906000526020600020016040516122489190613b54565b908152602001604051809103902060009054906101000a900460ff16155b80156122c157506298968060066005600085815260200190815260200160002083815481106122985761229761352a565b5b906000526020600020016040516122af9190613b54565b90815260200160405180910390205414155b80156122da5750601c60029054906101000a900460ff16155b156129a557600060066005600085815260200190815260200160002083815481106123085761230761352a565b5b9060005260206000200160405161231f9190613b54565b908152602001604051809103902054036125f15762989680600660056000858152602001908152602001600020838154811061235e5761235d61352a565b5b906000526020600020016040516123759190613b54565b9081526020016040518091039020819055506001601c60026101000a81548160ff0219169083151502179055506001601a546123b19190613a9d565b601a81905550600192506008600083815260200190815260200160002054811480156123ea575060016013546123e79190613a09565b81105b156125ec575b601d6005600084815260200190815260200160002084836124119190613a9d565b815481106124225761242161352a565b5b906000526020600020016040516124399190613b54565b908152602001604051809103902060009054906101000a900460ff16806124b957506298968060066005600085815260200190815260200160002085846124809190613a9d565b815481106124915761249061352a565b5b906000526020600020016040516124a89190613b54565b908152602001604051809103902054145b80156124dd575060016013546124cf9190613a09565b83826124db9190613a9d565b105b156124f6576001836124ef9190613a9d565b92506123f0565b601d6005600084815260200190815260200160002084836125179190613a9d565b815481106125285761252761352a565b5b9060005260206000200160405161253f9190613b54565b908152602001604051809103902060009054906101000a900460ff161580156125c257506298968060066005600085815260200190815260200160002085846125889190613a9d565b815481106125995761259861352a565b5b906000526020600020016040516125b09190613b54565b90815260200160405180910390205414155b156125eb5782816125d39190613a9d565b60086000848152602001908152602001600020819055505b5b6129b8565b6001925060016013546126049190613a09565b8110156129a4575b601d60056000848152602001908152602001600020848361262d9190613a9d565b8154811061263e5761263d61352a565b5b906000526020600020016040516126559190613b54565b908152602001604051809103902060009054906101000a900460ff16806126d5575062989680600660056000858152602001908152602001600020858461269c9190613a9d565b815481106126ad576126ac61352a565b5b906000526020600020016040516126c49190613b54565b908152602001604051809103902054145b80156126f9575060016013546126eb9190613a09565b83826126f79190613a9d565b105b156127125760018361270b9190613a9d565b925061260c565b601d6005600084815260200190815260200160002084836127339190613a9d565b815481106127445761274361352a565b5b9060005260206000200160405161275b9190613b54565b908152602001604051809103902060009054906101000a900460ff161580156127905750601354838261278e9190613a9d565b105b156129a3576001600760006005600086815260200190815260200160002084815481106127c0576127bf61352a565b5b906000526020600020016005600087815260200190815260200160002087866127e99190613a9d565b815481106127fa576127f961352a565b5b90600052602060002001604051602001612815929190613dfb565b604051602081830303815290604052805190602001208152602001908152602001600020546128449190613a9d565b6007600060056000868152602001908152602001600020848154811061286d5761286c61352a565b5b906000526020600020016005600087815260200190815260200160002087866128969190613a9d565b815481106128a7576128a661352a565b5b906000526020600020016040516020016128c2929190613dfb565b60405160208183030381529060405280519060200120815260200190815260200160002081905550600c6005600084815260200190815260200160002082815481106129115761291061352a565b5b9060005260206000200160056000858152602001908152602001600020858461293a9190613a9d565b8154811061294b5761294a61352a565b5b90600052602060002001604051602001612966929190613dfb565b6040516020818303038152906040528051906020012090806001815401808255809150506001900390600052602060002001600090919091909150555b5b5b80806129b0906139c1565b9150506121a8565b5080806129c4906139c1565b915050612185565b5060005b601154811015612f7557600091505b60016013546129ee9190613a09565b82108015612a095750601c60029054906101000a900460ff16155b15612f6257600060076000600560008581526020019081526020016000208581548110612a3957612a3861352a565b5b9060005260206000200160056000868152602001908152602001600020600187612a639190613a9d565b81548110612a7457612a7361352a565b5b90600052602060002001604051602001612a8f929190613dfb565b6040516020818303038152906040528051906020012081526020019081526020016000205414158015612b115750629896806006600560008481526020019081526020016000208481548110612ae857612ae761352a565b5b90600052602060002001604051612aff9190613b54565b90815260200160405180910390205414155b8015612b78575062989680600660056000848152602001908152602001600020600185612b3e9190613a9d565b81548110612b4f57612b4e61352a565b5b90600052602060002001604051612b669190613b54565b90815260200160405180910390205414155b8015612bdb5750601d600560008381526020019081526020016000208381548110612ba657612ba561352a565b5b90600052602060002001604051612bbd9190613b54565b908152602001604051809103902060009054906101000a900460ff16155b15612f4e5760006006600560008481526020019081526020016000208481548110612c0957612c0861352a565b5b90600052602060002001604051612c209190613b54565b90815260200160405180910390205414612e20576006600560008381526020019081526020016000208381548110612c5b57612c5a61352a565b5b90600052602060002001604051612c729190613b54565b90815260200160405180910390205460076000600560008581526020019081526020016000208581548110612caa57612ca961352a565b5b9060005260206000200160056000868152602001908152602001600020600187612cd49190613a9d565b81548110612ce557612ce461352a565b5b90600052602060002001604051602001612d00929190613dfb565b60405160208183030381529060405280519060200120815260200190815260200160002054601954612d329190613e1f565b612d3c9190613a6c565b600660056000848152602001908152602001600020600185612d5e9190613a9d565b81548110612d6f57612d6e61352a565b5b90600052602060002001604051612d869190613b54565b908152602001604051809103902054612d9f9190613a9d565b600660056000848152602001908152602001600020600185612dc19190613a9d565b81548110612dd257612dd161352a565b5b90600052602060002001604051612de99190613b54565b908152602001604051809103902081905550600182612e089190613a9d565b60086000838152602001908152602001600020819055505b600060076000600560008581526020019081526020016000208581548110612e4b57612e4a61352a565b5b9060005260206000200160056000868152602001908152602001600020600187612e759190613a9d565b81548110612e8657612e8561352a565b5b90600052602060002001604051602001612ea1929190613dfb565b60405160208183030381529060405280519060200120815260200190815260200160002081905550629896806006600560008481526020019081526020016000208481548110612ef457612ef361352a565b5b90600052602060002001604051612f0b9190613b54565b9081526020016040518091039020819055506001601a54612f2c9190613a9d565b601a819055506001601c60026101000a81548160ff0219169083151502179055505b600182612f5b9190613a9d565b91506129df565b8080612f6d906139c1565b9150506129d0565b5050565b6000620186a0905060005b6011548110156130c95760005b6013548110156130b557826006600560008581526020019081526020016000208381548110612fc357612fc261352a565b5b90600052602060002001604051612fda9190613b54565b90815260200160405180910390205410801561304d5750601d6005600084815260200190815260200160002082815481106130185761301761352a565b5b9060005260206000200160405161302f9190613b54565b908152602001604051809103902060009054906101000a900460ff16155b156130a25760066005600084815260200190815260200160002082815481106130795761307861352a565b5b906000526020600020016040516130909190613b54565b90815260200160405180910390205492505b80806130ad906139c1565b915050612f91565b5080806130c1906139c1565b915050612f84565b5090565b50805460008255906000526020600020908101906130eb91906130ee565b50565b5b8082111561310e57600081816131059190613112565b506001016130ef565b5090565b50805461311e90613634565b6000825580601f10613130575061314f565b601f01602090049060005260206000209081019061314e9190613152565b5b50565b5b8082111561316b576000816000905550600101613153565b5090565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061319a8261316f565b9050919050565b6131aa8161318f565b82525050565b60006020820190506131c560008301846131a1565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f8401126131fa576131f96131d5565b5b8235905067ffffffffffffffff811115613217576132166131da565b5b602083019150836020820283011115613233576132326131df565b5b9250929050565b6000819050919050565b61324d8161323a565b811461325857600080fd5b50565b60008135905061326a81613244565b92915050565b60008083601f840112613286576132856131d5565b5b8235905067ffffffffffffffff8111156132a3576132a26131da565b5b6020830191508360208202830111156132bf576132be6131df565b5b9250929050565b6000806000806000606086880312156132e2576132e16131cb565b5b600086013567ffffffffffffffff811115613300576132ff6131d0565b5b61330c888289016131e4565b9550955050602061331f8882890161325b565b935050604086013567ffffffffffffffff8111156133405761333f6131d0565b5b61334c88828901613270565b92509250509295509295909350565b600060208284031215613371576133706131cb565b5b600061337f8482850161325b565b91505092915050565b600081519050919050565b600082825260208201905092915050565b60005b838110156133c25780820151818401526020810190506133a7565b60008484015250505050565b6000601f19601f8301169050919050565b60006133ea82613388565b6133f48185613393565b93506134048185602086016133a4565b61340d816133ce565b840191505092915050565b6000602082019050818103600083015261343281846133df565b905092915050565b60008060208385031215613451576134506131cb565b5b600083013567ffffffffffffffff81111561346f5761346e6131d0565b5b61347b858286016131e4565b92509250509250929050565b600082825260208201905092915050565b7f4f6e6c79206368616972706572736f6e2063616e20676976652072696768742060008201527f746f20766f74652e000000000000000000000000000000000000000000000000602082015250565b60006134f4602883613487565b91506134ff82613498565b604082019050919050565b60006020820190508181036000830152613523816134e7565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b6000808335600160200384360303811261358557613584613559565b5b80840192508235915067ffffffffffffffff8211156135a7576135a661355e565b5b6020830192506001820236038313156135c3576135c2613563565b5b509250929050565b600082905092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168061364c57607f821691505b60208210810361365f5761365e613605565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b6000600883026136c77fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8261368a565b6136d1868361368a565b95508019841693508086168417925050509392505050565b6000819050919050565b600061370e6137096137048461323a565b6136e9565b61323a565b9050919050565b6000819050919050565b613728836136f3565b61373c61373482613715565b848454613697565b825550505050565b600090565b613751613744565b61375c81848461371f565b505050565b5b8181101561378057613775600082613749565b600181019050613762565b5050565b601f8211156137c55761379681613665565b61379f8461367a565b810160208510156137ae578190505b6137c26137ba8561367a565b830182613761565b50505b505050565b600082821c905092915050565b60006137e8600019846008026137ca565b1980831691505092915050565b600061380183836137d7565b9150826002028217905092915050565b61381b83836135cb565b67ffffffffffffffff811115613834576138336135d6565b5b61383e8254613634565b613849828285613784565b6000601f8311600181146138785760008415613866578287013590505b61387085826137f5565b8655506138d8565b601f19841661388686613665565b60005b828110156138ae57848901358255600182019150602085019450602081019050613889565b868310156138cb57848901356138c7601f8916826137d7565b8355505b6001600288020188555050505b50505050505050565b6138ea8161318f565b81146138f557600080fd5b50565b600081359050613907816138e1565b92915050565b600060208284031215613923576139226131cb565b5b6000613931848285016138f8565b91505092915050565b600081905092915050565b82818337600083830152505050565b6000613960838561393a565b935061396d838584613945565b82840190509392505050565b6000613986828486613954565b91508190509392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b60006139cc8261323a565b91507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82036139fe576139fd613992565b5b600182019050919050565b6000613a148261323a565b9150613a1f8361323a565b9250828203905081811115613a3757613a36613992565b5b92915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601260045260246000fd5b6000613a778261323a565b9150613a828361323a565b925082613a9257613a91613a3d565b5b828204905092915050565b6000613aa88261323a565b9150613ab38361323a565b9250828201905080821115613acb57613aca613992565b5b92915050565b60008154613ade81613634565b613ae8818661393a565b94506001821660008114613b035760018114613b1857613b4b565b60ff1983168652811515820286019350613b4b565b613b2185613665565b60005b83811015613b4357815481890152600182019150602081019050613b24565b838801955050505b50505092915050565b6000613b608284613ad1565b915081905092915050565b600081549050613b7a81613634565b9050919050565b60008190508160005260206000209050919050565b818103613ba4575050613c7c565b613bad82613b6b565b67ffffffffffffffff811115613bc657613bc56135d6565b5b613bd08254613634565b613bdb828285613784565b6000601f831160018114613c0a5760008415613bf8578287015490505b613c0285826137f5565b865550613c75565b601f198416613c1887613b81565b9650613c2386613665565b60005b82811015613c4b57848901548255600182019150600185019450602081019050613c26565b86831015613c685784890154613c64601f8916826137d7565b8355505b6001600288020188555050505b5050505050505b565b600081549050919050565b600082825260208201905092915050565b60008190508160005260206000209050919050565b600082825260208201905092915050565b60008154613ccd81613634565b613cd78186613caf565b94506001821660008114613cf25760018114613d0857613d3b565b60ff198316865281151560200286019350613d3b565b613d1185613665565b60005b83811015613d3357815481890152600182019150602081019050613d14565b808801955050505b50505092915050565b6000613d508383613cc0565b905092915050565b6000600182019050919050565b6000613d7082613c7e565b613d7a8185613c89565b935083602082028501613d8c85613c9a565b8060005b85811015613dc757848403895281613da88582613d44565b9450613db383613d58565b925060208a01995050600181019050613d90565b50829750879550505050505092915050565b60006020820190508181036000830152613df38184613d65565b905092915050565b6000613e078285613ad1565b9150613e138284613ad1565b91508190509392505050565b6000613e2a8261323a565b9150613e358361323a565b9250828202613e438161323a565b91508282048414831517613e5a57613e59613992565b5b509291505056fea2646970667358221220fbb9c6832c9cf5d44666ca07897b26d4c8d0ec31fa0bcbe0a124344073ed626064736f6c63430008110033" 


// the allocation of the accounts and objects
let accounts = []
let rawTransactions = []
let allocDict = {}

// helper function
let getGenesisTemplate = () => {
    return JSON.parse(fs.readFileSync('./genesis_template.json'))
}

// Transaction things
//const txParams = {
  //nonce: '0x00',
  //gasPrice: '0xff184e72a000',
  //gasLimit: '0xfff7100',
  //to: "0xBce16ea55bB357B038e612b1722A88879c665a31",
  //value: '0x1',
  //chainId: 161
//}

const customCommon = Common.default.forCustomChain(
  'mainnet',
  {
    name: 'custom-benchmark-chain',
    networkId: 10,
    chainId: 161,
  },
  'petersburg'
)


console.log("[*] Generating " + NUMTX + " transactions")
//let genesisTemplate = getGenesisTemplate()
//let genTemplateCopy = {...genesisTemplate};
var privkey = fs.readFileSync('priv-keys.log').toString().split("\n");

me = []
const data1 = fs.readFileSync('new.log', 'UTF-8');
const lines1 = data1.split(/\r?\n/);
lines1.forEach((address) => {
        //console.log(address)
        me.push(address)
    });

let gas = 0
for (let i = 0; i < NUMTX; i++) {
    // generate the account and add to the array
    //let a = Wallet.default.generate()
    //accounts.push(a.getPrivateKeyString())

    // add to the genesis alloc
   //allocDict[a.getAddressString()] = startBalance
   //text = a.getAddressString() + "\n"
   //fs.appendFileSync('new.log', text);
   gas = gas + 0xff184e72a000;
   const txParams = {
        nonce: '0x00',
        gasPrice: gas,
        gasLimit: '0xffff7100',
        to: null,
        data: CONTRACTDATA,
        value: '0x0',
        chainId: 161
   }

    let newTx = {...txParams}
   //read from address from file
    newTx["from"] = me[i]

    // generate the transaction and sign it
    let tx = new EthereumTx(txParams, {common: customCommon})
    var privateKey = Buffer.from(privkey[i], 'hex')
    tx.sign(privateKey)

    rawTransactions.push(
      {
        'hash': tx.hash().toString('hex'),
        'serialized': (tx.serialize()).toString('hex')
      }
    )
}

//console.log('[*] Done!')
//console.log('[*] Generating Genesis')

// write the genesis file
//let genesisTemplate = getGenesisTemplate()
//let genTemplateCopy = {...genesisTemplate};
//genTemplateCopy.alloc = {...allocDict}

//let b = Buffer.from(JSON.stringify(genTemplateCopy, null, 4))

//try {
    //fs.writeFileSync('genesis.json', b)
//} catch(error) {
    //console.log(error);
//}

console.log('[*] Done!')
console.log('[*] Generating Transaction file')

b = Buffer.from(JSON.stringify(rawTransactions))

try {
    fs.writeFileSync('txs-sc.json', b)
} catch(error) {
    console.log(error);
}

console.log('[*] Done! Printing to stdout for sanity')

//console.log(JSON.stringify(genTemplateCopy, null, 4))
console.log(JSON.stringify(rawTransactions, null, 2))

